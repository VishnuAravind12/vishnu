---
title: Character in Motion OOP 
layout: post
description: Use JavaScript without external libraries to animate the character moving across the screen, OOP style.
image: /images/AjFP5.png
---

## Interactive Sprite Animation

<div id="container">
    <div id="sprite"></div>
</div>

<style>
    #container {
        width: 320px;
        height: 320px;
        border: 2px solid black;
        position: relative;
        overflow: hidden;
    }

    #sprite {
        width: 64px;
        height: 64px;
        background: url('{{site.baseurl}}/images/AjFP5.png') 0 0;
        position: absolute;
        top: 128px; /* Initial position */
        left: 128px; /* Initial position */
    }
</style>

<script>
    let frameIndex = 0;
    const spriteDiv = document.getElementById('sprite');
    let currentRow = 0;
    const moveAmount = 8;
    let keysPressed = {
        ArrowUp: false,
        ArrowDown: false,
        ArrowLeft: false,
        ArrowRight: false
    };

    function animateSprite() {
        spriteDiv.style.backgroundPosition = `-${frameIndex * 64}px -${currentRow * 64}px`;
        frameIndex = (frameIndex + 1) % 4;
    }

    function moveSpriteDirection(direction) {
        let currentTop = parseInt(spriteDiv.style.top);
        let currentLeft = parseInt(spriteDiv.style.left);

        switch (direction) {
            case 0: // Forward
                if (currentTop < 256) {
                    spriteDiv.style.top = (currentTop + moveAmount) + 'px';
                }
                break;
            case 1: // Left
                if (currentLeft > 0) {
                    spriteDiv.style.left = (currentLeft - moveAmount) + 'px';
                }
                break;
            case 2: // Right
                if (currentLeft < 256) {
                    spriteDiv.style.left = (currentLeft + moveAmount) + 'px';
                }
                break;
            case 3: // Backward
                if (currentTop > 0) {
                    spriteDiv.style.top = (currentTop - moveAmount) + 'px';
                }
                break;
        }
    }

    function handleKeyDown(event) {
        if (keysPressed[event.key] !== undefined) {
            event.preventDefault();
            keysPressed[event.key] = true;
        }
    }

    function handleKeyUp(event) {
        if (keysPressed[event.key] !== undefined) {
            keysPressed[event.key] = false;
        }
    }

    function animationLoop() {
        if (keysPressed.ArrowUp) {
            currentRow = 3;
            animateSprite();
            moveSpriteDirection(currentRow);
        }
        if (keysPressed.ArrowDown) {
            currentRow = 0;
            animateSprite();
            moveSpriteDirection(currentRow);
        }
        if (keysPressed.ArrowLeft) {
            currentRow = 1;
            animateSprite();
            moveSpriteDirection(currentRow);
        }
        if (keysPressed.ArrowRight) {
            currentRow = 2;
            animateSprite();
            moveSpriteDirection(currentRow);
        }
        setTimeout(animationLoop, 500); // Adjusted speed to make it slower
    }

    document.body.addEventListener('keydown', handleKeyDown);
    document.body.addEventListener('keyup', handleKeyUp);
    animationLoop();
</script>
